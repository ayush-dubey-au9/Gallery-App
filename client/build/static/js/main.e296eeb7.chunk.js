(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),s=a.n(c),l=(a(45),a(11)),o=a(4),i=a(34),d=a.n(i),u=a(5),b=a(7),j=a.n(b),m=a(14),p=a(36),h=a.n(p).a.create({baseURL:"http://localhost:5000"});h.interceptors.request.use((function(e){return localStorage.getItem("profile")&&(e.headers.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("profile")).token)),e}));var O=function(e,t){return h.put("/photo/".concat(e),t)},x=function(e){return h.post("/user/login",e)},v=function(e){return h.post("/user/register",e)},f="FETCH_DATA",g="UPDATE_DATA",N="ADD_DATA",y="DELETE_DATA",w="LOGIN",k="REGISTER",C="LOGOUT",S=a(0),I=function(e){var t,a=e.currentId,r=e.setCurrentId,c=Object(n.useState)({title:"",selectedImage:""}),s=Object(l.a)(c,2),i=s[0],b=s[1],p=Object(u.b)(),x=JSON.parse(localStorage.getItem("profile")),v=Object(u.c)((function(e){return a?e.Photos.find((function(e){return e._id===a})):null}));Object(n.useEffect)((function(){v&&b(v)}),[v]);var f=function(){r(null),b({title:"",selectedImage:""})};return(null===x||void 0===x||null===(t=x.result)||void 0===t?void 0:t.name)?Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("form",{className:"mt-2 mb-3",onSubmit:function(e){var t,n,r,c;(e.preventDefault(),a)?(p((r=a,c=Object(o.a)(Object(o.a)({},i),{},{name:null===x||void 0===x||null===(t=x.result)||void 0===t?void 0:t.name}),function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(r,c);case 3:a=e.sent,n=a.data,t({type:g,payload:n}),console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),f()):(p(function(e){return function(){var t=Object(m.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c=e,h.post("/photo",c);case 3:n=t.sent,r=n.data,a({type:N,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.message);case 11:case"end":return t.stop()}var c}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(Object(o.a)(Object(o.a)({},i),{},{name:null===x||void 0===x||null===(n=x.result)||void 0===n?void 0:n.name}))),f())},children:[Object(S.jsx)("h5",{className:a?"display-3 badge-warning text-center":"display-3 badge-primary text-center",children:a?"Edit":"Create"}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"imageTitle",children:"Title"}),Object(S.jsx)("input",{className:"form-control form-control-lg",type:"text",placeholder:"Image Title",id:"imageTitle",value:i.title,onChange:function(e){return b(Object(o.a)(Object(o.a)({},i),{},{title:e.target.value}))}})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"imageUpload",children:"Enter Image File"}),Object(S.jsx)("hr",{}),Object(S.jsx)(d.a,{type:"file",multiple:!1,onDone:function(e){var t=e.base64;return b(Object(o.a)(Object(o.a)({},i),{},{selectedImage:t}))}})]}),Object(S.jsx)("button",{type:"submit",className:"btn btn-primary mb-2 btn-block",children:"Submit"}),Object(S.jsx)("input",{type:"reset",className:"btn btn-warning btn-block",value:"Clear All",onClick:f})]})}):Object(S.jsx)("div",{className:"container",children:Object(S.jsx)("h3",{className:"text-center",children:'"Please Login To Post a Photo"'})})},F=a(37),P=a.n(F),D=function(e){var t,a,n=e.eachPhoto,r=n.name,c=n.createdAt,s=n.title,l=n.selectedImage,o=n._id,i=e.setCurrentId,d=e.eachPhoto,b=Object(u.b)(),p=JSON.parse(localStorage.getItem("profile"));return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"card mt-2 text-info border-info",style:{width:"100%"},children:[Object(S.jsx)("img",{className:"card-img-top",src:l,alt:"Cardcap",style:{maxHeight:"15rem"}}),Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsxs)("h5",{className:"card-title",children:[s," "]}),Object(S.jsxs)("h6",{className:"card-text",children:["Posted By:-",Object(S.jsx)("span",{className:"badge badge-dark",children:r})]}),(null===p||void 0===p||null===(t=p.result)||void 0===t?void 0:t._id)===(null===d||void 0===d?void 0:d.creator)&&Object(S.jsx)("button",{className:"btn btn-outline-danger btn-block p-2",onClick:function(){return b((e=o,function(){var t=Object(m.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n=e,h.delete("/photo/".concat(n));case 3:a({type:y,payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}var n}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()));var e},children:"Delete"}),(null===p||void 0===p||null===(a=p.result)||void 0===a?void 0:a._id)===(null===d||void 0===d?void 0:d.creator)&&Object(S.jsx)("button",{className:"btn btn-outline-warning btn-block p-2",onClick:function(){return i(o)},children:"Update"}),Object(S.jsx)("hr",{}),Object(S.jsxs)("small",{className:"text-muted",children:["Posted on"," ",Object(S.jsx)("span",{className:"badge badge-info",children:P()(c).format("MM/DD/ YY")})]})]})]})})},E=function(e){var t=e.currentId,a=e.setCurrentId,n=Object(u.c)((function(e){return e.Photos}));return console.log(n),Object(S.jsx)(S.Fragment,{children:n?Object(S.jsx)("div",{className:"row",children:n.map((function(e){return Object(S.jsx)("div",{className:"col-md-6 col-12 mb-2 mt-1",children:Object(S.jsx)(D,{eachPhoto:e,currentId:t,setCurrentId:a})},e._id)}))}):Object(S.jsx)("h1",{className:"text-center text-primary",children:"Loading..."})})},A=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],c=Object(u.b)();return Object(n.useEffect)((function(){c(function(){var e=Object(m.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/photo");case 3:a=e.sent,n=a.data,t({type:f,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[c]),Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"container",children:Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-md-8 col-12 order-2 ",children:Object(S.jsx)(E,{currentId:a,setCurrentId:r})}),Object(S.jsx)("div",{className:"col-md-4 col-12 order-md-2 mt-5",children:Object(S.jsx)(I,{currentId:a,setCurrentId:r})})]})})})},T=a(3),L=a(13),_=a(38),H=function(){var e=Object(T.g)(),t=Object(T.f)(),a=Object(u.b)(),r=Object(n.useState)(JSON.parse(localStorage.getItem("profile"))),c=Object(l.a)(r,2),s=c[0],o=c[1];Object(n.useEffect)((function(){var e=null===s||void 0===s?void 0:s.token;e&&(1e3*Object(_.a)(e).exp<(new Date).getTime()&&i());o(JSON.parse(localStorage.getItem("profile")))}),[e]);var i=function(){a({type:C}),t.push("/"),o(null)};console.log(s);var d=Object(S.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(S.jsx)(L.b,{className:"nav-item nav-link",to:"/login",children:"Login"}),Object(S.jsx)(L.b,{className:"nav-item nav-link",to:"/register",children:"Register"})]}),b=Object(S.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(S.jsxs)("h4",{className:"nav-item nav-link mr-2",children:[Object(S.jsx)("i",{className:"fa fa-user"})," ",null===s||void 0===s?void 0:s.result.name]}),Object(S.jsx)("form",{className:"form-inline",children:Object(S.jsx)("button",{className:"btn btn-outline-danger",type:"button",onClick:i,children:"Logout"})})]});return Object(S.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(S.jsx)(L.b,{to:"/",className:"navbar-brand",children:"Photo Gallery"}),Object(S.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(S.jsx)("span",{className:"navbar-toggler-icon"})}),Object(S.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",children:s?b:d})]})},J=a(16),M=function(){var e=Object(u.b)(),t=Object(T.f)(),a=Object(n.useState)(!1),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)({email:"",password:""}),d=Object(l.a)(i,2),b=d[0],p=d[1],h=function(e){p(Object(o.a)(Object(o.a)({},b),{},Object(J.a)({},e.target.name,e.target.value)))},O=b.email,v=b.password;return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h3",{className:"text-center display-4 mt-2",children:"Login Here"}),Object(S.jsxs)("form",{onSubmit:function(a){a.preventDefault(),console.log(b),e(function(e,t){return function(){var a=Object(m.a)(j.a.mark((function a(n){var r,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x(e);case 3:r=a.sent,c=r.data,n({type:w,data:c}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(b,t))},children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(S.jsx)("input",{type:"email",className:"form-control  form-control-lg",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",onChange:h,value:O,name:"email"}),Object(S.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Get a whole New Experience"})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)("input",{type:c?"text":"password",className:"form-control form-control-lg",id:"password",placeholder:"Password",value:v,name:"password",onChange:h})]}),Object(S.jsxs)("div",{className:"form-check mb-2 mr-sm-2",children:[Object(S.jsx)("input",{onClick:function(){return s(!c)},className:"form-check-input",type:"checkbox",id:"inlineFormCheck"}),Object(S.jsx)("label",{className:"form-check-label",htmlFor:"inlineFormCheck",children:Object(S.jsx)("span",{className:"text-muted",children:"Show Password"})})]}),Object(S.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(S.jsx)("br",{}),Object(S.jsxs)("small",{className:"text-muted",children:["New ? ",Object(S.jsx)(L.b,{to:"/register",children:"Click Here"})," for registration"]})]})]})},G=function(){var e=Object(u.b)(),t=Object(T.f)(),a=Object(n.useState)(!1),r=Object(l.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)({name:"",email:"",password:"",passwordC:""}),d=Object(l.a)(i,2),b=d[0],p=d[1],h=function(e){p(Object(o.a)(Object(o.a)({},b),{},Object(J.a)({},e.target.name,e.target.value)))},O=b.name,x=b.email,f=b.password,g=b.passwordC;return Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)("h3",{className:"text-center display-4 mt-2",children:"Register Here"}),Object(S.jsxs)("form",{onSubmit:function(a){if(a.preventDefault(),b.password!==b.passwordC)return alert("Password Do Not Match");console.log(b),e(function(e,t){return function(){var a=Object(m.a)(j.a.mark((function a(n){var r,c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v(e);case 3:r=a.sent,c=r.data,n({type:k,data:c}),t.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}()}(b,t))},children:[Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"userName",children:"User Name"}),Object(S.jsx)("input",{type:"text",className:"form-control  form-control-lg",id:"userName","aria-describedby":"userHelp",placeholder:"Enter Name",name:"name",value:O,onChange:h})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(S.jsx)("input",{type:"email",className:"form-control  form-control-lg",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email",name:"email",value:x,onChange:h}),Object(S.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Get a whole New Experience"})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)("input",{type:c?"text":"password",className:"form-control form-control-lg",id:"password",placeholder:"Password",value:f,name:"password",onChange:h}),Object(S.jsxs)("div",{className:"form-check mb-2 mr-sm-2",children:[Object(S.jsx)("input",{onClick:function(){return s(!c)},className:"form-check-input",type:"checkbox",id:"inlineFormCheck"}),Object(S.jsx)("label",{className:"form-check-label",htmlFor:"inlineFormCheck",children:Object(S.jsx)("span",{className:"text-muted",children:"Show Password"})})]})]}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"passwordC",children:"Confirm Password"}),Object(S.jsx)("input",{type:"password",className:"form-control form-control-lg",id:"passwordC",name:"passwordC",value:g,onChange:h,placeholder:"Enter Password Again"})]}),Object(S.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(S.jsx)("br",{}),Object(S.jsxs)("small",{className:"text-muted",children:["Already Registered? ",Object(S.jsx)(L.b,{to:"/login",children:"Click Here"})," to Log in!!"]})]})]})};var R=function(){return Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(L.a,{children:[Object(S.jsx)(H,{}),Object(S.jsxs)(T.c,{children:[Object(S.jsx)(T.a,{path:"/",exact:!0,component:A}),Object(S.jsx)(T.a,{path:"/login",exact:!0,component:M}),Object(S.jsx)(T.a,{path:"/register",exact:!0,component:G})]})]})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,77)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},B=a(17),Y=a(39),q=a(40),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;case N:return[].concat(Object(q.a)(e),[t.payload]);case g:var a=e.map((function(e){return console.log(e),e._id===t.payload._id?t.payload:e}));return a;case y:return e.filter((function(e){return e._id!==t.payload}));default:return e}},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authData:null},t=arguments.length>1?arguments[1]:void 0,a=t.type;switch(a){case w:case k:return localStorage.setItem("profile",JSON.stringify(Object(o.a)({},null===t||void 0===t?void 0:t.data))),Object(o.a)(Object(o.a)({},e),{},{authData:null===t||void 0===t?void 0:t.data});case C:return localStorage.clear(),Object(o.a)(Object(o.a)({},e),{},{authData:null});default:return e}},Q=Object(B.b)({Photos:z,auth:K}),V=Object(B.d)(Q,Object(B.c)(Object(B.a)(Y.a)));s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(u.a,{store:V,children:Object(S.jsx)(R,{})})}),document.getElementById("root")),U()}},[[76,1,2]]]);
//# sourceMappingURL=main.e296eeb7.chunk.js.map